; REQUIRES: synthesis

; RUN: %souper-check -try-dataflow-pruning %s > %t
; RUN: %FileCheck %s < %t

; CHECK: Pruning failed

%0 = block 2
%1:i64 = var
%2:i64 = lshr %1, 16:i64
%3:i64 = var
%4:i64 = lshr %3, 16:i64
%5:i64 = phi %0, %2, %4
%6:i16 = trunc %5
%7:i32 = zext %6
infer %7 (demandedBits=00000000000000001111111100000000)
%8:i32 = trunc %5
result %8

; CHECK: Pruning failed

%0:i32 = var (range=[0,-2147483648))
%1:i8 = trunc %0
%2:i32 = zext %1
infer %2
%3:i32 = reservedconst
%4:i32 = and %3, %0
result %4
